# DeletedEntitiesTracking
Шаблон разработки "Отслеживание удалённых объектов". Решение для Directum RX 25.2 и выше

# Описание шаблона
Шаблон предназначен для мониторинга удалённых объектов в системе Directum RX. Он помогает администраторам анализировать динамику удаления, выявлять аномалии и снижать риски случайного или некорректного удаления данных.

# Состав решения
1.	Модуль: Администрирование (Administration).
2.	Виджет: Удалённые объекты RX (DeletedObjects)
3.	Отчет: Отчет. Отслеживание удаления объектов. (DeletionsDocumentReport).

# Варианты расширения функциональности на проектах
1.	Расширение вариантов удаляемых объектов в системе: задания.
2.	Расширение временных диапазонов сборов данных.
3.	Настроить фоновый процесс, отправляющий PDF-отчет раз в неделю.
4.	Добавить проверку прав: кто может выполнять SQL-запросы в отчёте. 

# Архитектурно неочевидные моменты
-  Доступ к отчету рекомендуется предоставлять только администраторам системы, поскольку SQL-запросы выполняются без проверки прав доступа.

# Системные требования
- Directum RX 25.2 и выше
- Требуются права “Администратор системы”
- Доступ к выполнению SQL запросов в отчетах

# Порядок установки
## Установка для ознакомления
1. Склонировать репозиторий DeletedEntitiesTracking в папку.
2. Указать в _ConfigSettings.xml DDS:
```
<block name="REPOSITORIES">
  <repository folderName="Base" solutionType="Base" url="" /> 
  <repository folderName="<Папка из п.1>" solutionType="Work" 
     url="https://github.com/DirectumCompany/DeletedEntitiesTracking" />
</block>
```

## Установка для использования на проекте
Возможные варианты:

### A. Fork репозитория.
Сделать fork репозитория DeletedEntitiesTracking для своей учетной записи.
Склонировать созданный в п. 1 репозиторий в папку.
Указать в _ConfigSettings.xml DDS:
```
<block name="REPOSITORIES">
  <repository folderName="Base" solutionType="Base" url="" /> 
  <repository folderName="<Папка из п.2>" solutionType="Work" 
     url="<Адрес репозитория gitHub учетной записи пользователя из п. 1>" />
</block>
```

### B. Подключение на базовый слой.
Вариант не рекомендуется, так как при выходе версии шаблона разработки не гарантируется обратная совместимость.

Склонировать репозиторий DeletedEntitiesTracking в папку.
Указать в _ConfigSettings.xml DDS:
```
<block name="REPOSITORIES">
  <repository folderName="Base" solutionType="Base" url="" /> 
  <repository folderName="<Папка из п.1>" solutionType="Base" 
     url="https://github.com/DirectumCompany/DeletedEntitiesTracking" />
  <repository folderName="<Папка для рабочего слоя>" solutionType="Work" 
     url="<Адрес репозитория для рабочего слоя>" />
</block>
```

### C. Копирование репозитория в систему контроля версий.
Рекомендуемый вариант для проектов внедрения.

В системе контроля версий с поддержкой git создать новый репозиторий.
Склонировать репозиторий DeletedEntitiesTracking в папку с ключом ```--mirror.```
Перейти в папку из п. 2.
Импортировать клонированный репозиторий в систему контроля версий командой: ```git push –mirror <Адрес репозитория из п. 1>```